<h1>Budget List</h1>
<%= form_with model: @form, url: payments_balances_path, local: true do |form| %>
<%= render 'devise/shared/error_messages', model: form.object %>
  <div class="field">
    
    <%= form.label :date, 'Date' %>
    <%= form.date_field :date %>
  </div>

  <table>
    <thead>
      <tr>
        <th> purpose </th>
        <th> amount </th>
        <th> payment </th>
        <th> times </th>
      </tr>
    </thead>
  <tbody>
    <%= form.fields_for :payments_balances do |balance| %>
      <% @form.payments_balances.each do |pb| %>
        <%= render 'devise/shared/error_messages', model: pb %>
      <% end %>
      <tr>
        <td><%= balance.text_field :purpose %></td>
        <td><%= balance.text_field :amount %></td>
        <td><%= balance.collection_select(:payment_id, Payment.all, :id, :name, {}, {class:"select-box", id:"item-category"}) %></td>
        <td><%= balance.text_field :payment_times %></td>
      </tr>
    <% end %>

    </tbody>
  </table>
  <%= form.submit "登録" %>
  <%= link_to "戻る", root_path %>
<% end %>